<!DOCTYPE html>
<html lang="en">
<head>

	<title>Geolocation API</title>
</head>
<body>
	<table border = "1" cellpadding="10" cellspacing="0">
		<tr>
			<td>
				широта
			</td>
			<td>
				<p id = "latitude">
					
				</p>
			</td>
		</tr>
		<tr>
			<td>
				долгота
			</td>
			<td>
				<p id="longitude">
				</p>
			</td>
		</tr>
		<tr>
			<td>
				точность (m)
			</td>
			<td>
				<p id ="accuracy">
					
				</p>
			</td>
		</tr>
	</table>
	<p id="status">
	</p>
	<img id="loader" src="loader.gif" style="visibility:hidden " />

	<script type = "text/javascript">
		document.getElementyById("get").onclick = function () {

			showLoadStatus();

			navigator.Geolocation.getCurrentPosition(updateLocation, handleError, { ennableHighAccuracu: true, timeout: 10000, maximumAge: 30000} );

			function updateLocation(position) {
				var $ = function (selector) {
					return document.getElementyById(selector);
				}

				$("latitude").innerHTML = position.coords.latitude;
				$("longitude").innerHTML = position.coords.longitude;
				$("accuracy").innerHTML = position.coords.accuracy;

				hideLoadStatus();

			}

			function handleError(error) {
			switch (error.code) {
				case 0:
				    updateStatus("пр  попытке определить местоположение возникла ошибка:" + error.message);
				    break;
				case 1:
				    updateStatus("пользователь запретил получение данных о местоположении");
				    break;
				case 2:
				    updateStatus("Браузеру не удалось определить местоположение:" + error.message);
				    break;
				case 3:
				    updateStatus("истекло доступное время ожидания.");
				    break;
				}
				hiddenLoadStatus();

		}
		function updateStatus(message) {
			document.getElementyById("status").innerHTML = message;
		}

		function ShowLoadStatus() {
			document.getElementyById("loader").style.visibility = "visible"
		}

		function hideLoadStatus() {
			document.getElementyById("loader").style.visibility = "hidden";
			}
		}

	


	</script>

</body>
</html>